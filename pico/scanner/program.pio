.program scanner

load:
    pull noblock
    mov x, osr
    jmp x--, save
    mov x, y
    mov y, osr
    jmp high

high:
    set pins, 1
    jmp x--, high
    mov x, y
    jmp low

low:
    set pins, 0
    jmp x--, low
    mov x, y
    jmp load

save:
    mov y, osr
    mov x, osr
    jmp high